# 分布式高可用发号器实现方式

## 1. 使用UUID

UUID分为不同的版本,基本算法是根据时间+Mac地址+随机数,只能够保证很大概率上的不冲突,并且不依赖中心资源,能够适用于一些并发不高,且对唯一id不要求顺序的场景使用

## 2. 使用redis作为发号器

## 3. 预分配机制

采用双层架构,DB-MySQL持久化存储当前业务对应的最大ID以及步长,用作分发id使用,上层使用一个server端当做缓存,将一次获取到的号段保存在内存中,供前端请求进行发号

1. 依赖MySQL主库,主库宕机,在切主过程中会存在服务不可用状态
2. 取DB的时间会造成服务耗时上涨,不稳定
3. 整个发号只能保证不重复,但是id不是增长趋势

改进: 发号器server监控目前id下发位置,如果消费到75%则后台异步追加下次的发号数据

## 4. 